{"name":"Oss-upload-stream","tagline":"A Node.js module for streaming data to Aliyun OSS via the multipart upload API","body":"## oss-upload-stream\r\n\r\n[![Build Status](https://travis-ci.org/meteormatt/oss-upload-stream.svg?branch=master)](https://travis-ci.org/meteormatt/oss-upload-stream)\r\n[![Dependency Status](https://david-dm.org/meteormatt/oss-upload-stream.svg)](https://david-dm.org/meteormatt/oss-upload-stream)\r\n[![peerDependency Status](https://david-dm.org/meteormatt/oss-upload-stream/peer-status.svg)](https://david-dm.org/meteormatt/oss-upload-stream#info=peerDependencies)\r\n[![npm version](https://badge.fury.io/js/oss-upload-stream.svg)](https://badge.fury.io/js/oss-upload-stream)\r\n\r\nA pipeable write stream which uploads to Aliyun OSS using the multipart file upload API.\r\n\r\nFork from [s3-upload-stream](https://github.com/nathanpeck/s3-upload-stream).\r\n\r\n### 介绍\r\n\r\n阿里云官方的Node.js SDK [aliyun-sdk](https://github.com/aliyun-UED/aliyun-sdk-js) 不支持`stream`方式上传文件到OSS. \r\n所以我尝试修改了[s3-upload-stream](https://github.com/nathanpeck/s3-upload-stream), 然后移植在[aliyun-sdk](https://github.com/aliyun-UED/aliyun-sdk-js)上.\r\n\r\n项目取名`oss-upload-stream`, 并发布到`npm`上.\r\n\r\n### 样例\r\n\r\n样例代码请参考[examples/upload.js](https://github.com/meteormatt/oss-upload-stream/blob/master/examples/upload.js)\r\n\r\n```js\r\n#!/usr/bin/env node\r\nvar ALY = require('aliyun-sdk'),\r\n    fs = require('fs');\r\n\r\n// Make sure Aliyun credentials are loaded.\r\nvar config = require('./config.json');\r\n\r\n// Initialize a stream client.\r\nvar ossStream = require('../lib/oss-upload-stream.js')(new ALY.OSS(config));\r\n\r\n// Create the streams\r\nvar read = fs.createReadStream('文件路径');\r\nvar upload = ossStream.upload({\r\n  \"Bucket\": \"你的bucket\",\r\n  \"Key\": '文件名称'\r\n});\r\n\r\n// Handle errors.\r\nupload.on('error', function (error) {\r\n  console.log(error);\r\n});\r\n\r\n// Handle progress.\r\nupload.on('part', function (details) {\r\n  console.log(details);\r\n});\r\n\r\n// Handle upload completion.\r\nupload.on('uploaded', function (details) {\r\n  var delta = (new Date() - startTime) / 1000;\r\n  console.log(details);\r\n  console.log('Completed upload in', delta, 'seconds');\r\n});\r\n\r\n// Pipe the incoming filestream and upload to Aliyun OSS.\r\nread.pipe(upload);\r\nvar startTime = new Date();\r\n```\r\n\r\n### 安装\r\n\r\n```\r\nnpm install oss-upload-stream\r\n```\r\n\r\n### 测试\r\n\r\n```\r\nnpm test\r\n```\r\n\r\n### 许可证\r\n\r\n[Mozilla 公共许可协议](http://mozillachina.github.io/MPL/)","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}